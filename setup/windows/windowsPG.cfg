<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>

    <!-- Global confiduration -->
    <entry key="database.driver">org.postgresql.Driver</entry>
    <entry key="database.url">jdbc:postgresql:traccar</entry>
    <entry key="database.user">postgres</entry>
    <entry key="database.password">postgres</entry>

    <!-- Database refresh delay in seconds -->
    <entry key="database.refreshDelay">300</entry>

    <!-- Create database schema -->
    <entry key="database.initialize">
		CREATE SEQUENCE devicesSQ START 1 INCREMENT 1;
		CREATE SEQUENCE positionsSQ START 1 INCREMENT 1;
        CREATE TABLE devices (id int8 NOT NULL,imei varchar(16) NOT NULL,phonenumber varchar(255),uniqueid varchar(255),CONSTRAINT devices_pkey PRIMARY KEY (id)) WITH (OIDS=FALSE);
		ALTER TABLE devices OWNER TO postgres;
        CREATE TABLE positions (id int8 NOT NULL,address varchar(255),altitude float8,course float8,extendedinfo varchar(255),latitude float8 NOT NULL,longitude float8 NOT NULL,power float8 NOT NULL,speed float8,"time" timestamp NOT NULL,"valid" bool,device_id int8 NOT NULL,"mode" int4,CONSTRAINT positions_pkey PRIMARY KEY (id),CONSTRAINT fk_device FOREIGN KEY (device_id) REFERENCES devices (id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION) WITH (OIDS=FALSE);
		ALTER TABLE positions OWNER TO postgres;
    </entry>

    <!-->
        id - Long
        imei - String
    <-->
    <entry key="database.selectDevice">
        SELECT id, imei
        FROM devices
    </entry>

    <!-->
        imei - String
    <-->
    <entry key="database.insertDevice">
		INSERT INTO devices (id,imei)
        VALUES (nextval('devicesSQ'),:imei)
    </entry>

    <!-->
        id - Long
        imei - String
    <-->
    <entry key="database.updateDevice">
        UPDATE devices
        SET imei = :imei
        WHERE id = :id
    </entry>

    <!-->
        id - Long
    <-->
    <entry key="database.deleteDevice">
        DELETE FROM devices
        WHERE id = :id
    </entry>

    <!-->
        device_id - Long
    <-->
    <entry key="database.selectPosition">
        SELECT *
        FROM positions
        WHERE device_id = :device_id
    </entry>

    <!-->
        device_id - Long
        time - Date
        valid - Boolean
        latitude - Double
        longitude - Double
        speed - Double
        course - Double
        power - Double (NULL for some protocols)
		mode - Integer
        extended_info - String (XML)
    <-->
    <entry key="database.insertPosition">
        INSERT INTO positions (id, device_id, time, valid, latitude, longitude, speed, course, power, mode)
		VALUES (nextval('positionsSQ'),:device_id, :time, :valid, :latitude, :longitude, :speed, :course, :power, :mode)
    </entry>

    <!-- Web interface port -->
    <entry key="http.enable">true</entry>
    <entry key="http.port">8082</entry>

    <!-- Logging options -->
    <entry key="logger.enable">false</entry>
    <entry key="logger.file">jornadaLOG</entry>

    <!-- Xexun server configuration -->
    <entry key="xexun.enable">false</entry>
    <entry key="xexun.port">5000</entry>
    <entry key="xexun.resetDelay">0</entry>

    <!-- Gps103 server configuration -->
    <entry key="gps103.enable">false</entry>
    <entry key="gps103.port">5001</entry>
    <entry key="gps103.resetDelay">0</entry>

    <!-- Tk103 server configuration -->
    <entry key="tk103.enable">false</entry>
    <entry key="tk103.port">5002</entry>
    <entry key="tk103.resetDelay">0</entry>

    <!-- Gl100 server configuration -->
    <entry key="gl100.enable">false</entry>
    <entry key="gl100.port">5003</entry>
    <entry key="gl100.resetDelay">0</entry>

    <!-- Gl200 server configuration -->
    <entry key="gl200.enable">false</entry>
    <entry key="gl200.port">5004</entry>
    <entry key="gl200.resetDelay">0</entry>

    <!-- T55 server configuration -->
    <entry key="t55.enable">false</entry>
    <entry key="t55.port">5005</entry>
    <entry key="t55.resetDelay">0</entry>

    <!-- Xexun 2 server configuration -->
    <entry key="xexun2.enable">false</entry>
    <entry key="xexun2.port">5006</entry>
    <entry key="xexun2.resetDelay">0</entry>

    <!-- AVL-08 server configuration -->
    <entry key="avl08.enable">false</entry>
    <entry key="avl08.port">5007</entry>
    <entry key="avl08.resetDelay">0</entry>

    <!-- Enfora server configuration -->
    <entry key="enfora.enable">false</entry>
    <entry key="enfora.port">5008</entry>
    <entry key="enfora.resetDelay">0</entry>

    <!-- Meiligao server configuration -->
    <entry key="meiligao.enable">false</entry>
    <entry key="meiligao.port">5009</entry>
    <entry key="meiligao.resetDelay">0</entry>
    
    <!-- ST-210 server configuration -->
    <entry key="st210.enable">true</entry>
    <entry key="st210.port">8801</entry>
    <entry key="st210.resetDelay">0</entry>

</properties>
